{% extends 'base/main.html' %}
{% block content %}

<div class="header-bar">
    <a href="{% url 'lists' %}">&#8592; Back</a>
    {% if request.user.is_authenticated %}
    
    <a href="{% url 'logout' %}">LOGOUT</a>
    {% else %}
    <a href="{% url 'login' %}">LOGIN</a>
    {% endif %}
</div>


<div class="header-bar">
    <div>
        <h2> Hello {{request.user|title}} </h2>
        <h4 style="margin:0">You have <i>{{count}} </i> incomplete tasks from {{listname}}</h4>

    </div>
    
</div>

<nav class="navbar navbar-light bg-light justify-content-between">
    
    <form class="form-inline">
        <button class="badge badge-light"  name="search-area-Priority" value="" style='margin-right:10px'> All</button>
        <button class="badge badge-danger" name="search-area-Priority" value="High" style='margin-right:10px'> High</button>
        <button class="badge badge-primary" name="search-area-Priority" value="Normal" style='margin-right:10px'> Normal</button>
        <button class="badge badge-secondary" name="search-area-Priority" value="Low" style='margin-right:10px'> Low</button>
      <input class="form-control mr-sm-2" type='text' name='search-area' value="{{search_input}}" placeholder="Search" aria-label="Search">
      <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
    </form>
    {% if tasks|length > 0 %}
    <a id="add-link" href="{% url 'task-create' list.id %}" style="text-decoration: none;"> &#x2b;</a>
    {% endif %}
</nav>

<!-- <div id="search-add-wrapper">
    
    {% if tasks|length > 0 %}
    <a id="add-link" href="{% url 'task-create' list.id %}" style="text-decoration: none;"> &#x2b;</a>
    {% endif %}
</div> -->




<div id="tasklist" class="task-items-wrapper" style="overflow:scroll; height:300px;">
    <!-- <div class="task-wrapper" data-position="{{task.pk}}">
        <div class="task-title">
            <strong>&nbsp; Task Title:</strong>
            <strong>&nbsp; Task Description</strong>
        </div>
        <div class="task-controls">
            <strong> Priority&nbsp; Delete&nbsp;&nbsp;</strong>
        </div>
    </div> -->
    
    {% for task in tasks %}
        {% if task.id  %}
        <div class="task-wrapper" data-position="{{task.pk}}">
            <div class="task-title">
                {% if task.complete %}
                <!-- <div class="task-complete-icon"></div> -->
                <i><s><a title="{{task.description}}" href="{% url 'task-update' listid=list.id pk=task.id %}">{{task}}</a></s></i> 
                <!-- <i><a href="{% url 'task-update' listid=list.id pk=task.id %}">{{task.description}} </a></i>  -->
                {% else %}
                <!-- <div class="task-incomplete-icon"></div> -->
                <a title="{{task.description}}" href="{% url 'task-update' listid=list.id pk=task.id %}">{{task}}</a>
                <!-- <a href="{% url 'task-update' listid=list.id pk=task.id %}">{{task.description}}</a> -->
                {% endif %}
            </div>
            <div class="task-controls">
                {% if task.Priority == "High"  %}
                <button class="badge badge-danger">{{task.Priority}}</button>
                {% elif task.Priority == "Normal"  %}
                <button class="badge badge-primary">{{task.Priority}}</button>
                {% elif task.Priority == "Low"  %}
                <button class="badge badge-secondary">{{task.Priority}}</button>
                {% endif %}
                <a href="{% url 'task-update' listid=list.id pk=task.id %}" style="text-decoration: none;">&nbsp;&nbsp;&nbsp;{% load static %}
                    <img src="{% static 'base/edit(1).svg' %}">&nbsp;&nbsp;&nbsp;</a>
                <a class="delete-link" href="{% url 'task-delete' listid=list.id pk=task.id %}" style="text-decoration: none;">&#215;&nbsp;&nbsp;&nbsp;</a>
                
            </div>
            
            
        </div>
        {% endif %}
        {% empty %}
        <div style="text-align: center; padding-bottom: 10px; line-height: 1em;">
            <h3>No new tasks are created.</h3>
            <h3>Create a <a style="text-decoration: none; color: #e53935;" href="{% url 'task-create' list.id %}"> New task</a> ! </h3>
        </div>
        
    {% endfor %}
</div>

{% endblock content%}

